<html>
<head>
<title>FM scan</title>



<script>
frequencyList = new Array(925,985,885,951,901,909,917,929,933,941,949,953,957,961,965,981,989,999,1011,1021,1025,1029,1045,1053,1061);
favoriteList = new Array(925,985,885,951,901,909,917,929,933,941,949,953,957,961,965,981,989,999,1011,1021,1025,1029,1045,1053,1061);
primeList = new Array( 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997);




//looking to fit rhw break at the appropriate location. Some trouble with closing the sections. Will not complete properly. Possibly an execution flag.
//removing the break for now.
//something about resetting the variables.

//fix the ratios. Balerrina got her panies in a bunch.










/*++++++++++++++++++
LOOP F
Main process index. Scans the individual mapped dots on FM band.
Scans the favorite list decreasingly, finishing the sweep with heavier weights at the begining.

LOOP I
Calculates a first segment between the main sweep, and the first segment sweep.
Applies the factor to the current segment. Using the ratio weight.

There are only 2 lengths, the order doesn't matter.
It will do both. The first segment and the second segment. The ratio will swap itself

LOOP X
Calculates a second segment between the main sweep and the second segment sweep.
Applies the factor to the current segment. Using one of the ratio weight.

Measures the factored offsets to the input ratio's weight.

Smaller offsets are more precise.
Commits if the precision is better. And on the same side of the main sweep index.

++++++++++++++++++*/

exceptionList = new Array();
exceptionIndex = 0;

//===============================
function setExceptions(){
	for(gg = 0; gg < primeList.length; gg++){
		if((theInput1 / primeList[gg]) == Math.floor(theInput1 / primeList[gg])){
			exceptionList[exceptionIndex] = gg;
			exceptionIndex++;
		}
	}
}

function calculateRange(){
	exceptionIndex = 0;
	for(t = 0;t < primeList.length; t++){
		if(primeList[t] > theInput1 * 1)
			break;
	}
	exceptionIndex = t;
}

function init(){
	result = new Array(99,99,99);
	resultIndexA = new Array(0,0,0);
	resultIndexB = new Array(0,0,0);
	resultIndexC = new Array(0,0,0);
	testString = '';
	loggedPrimes = new Array(0,0,0);
	myBrains = 0; 
	mySeek = 0;
	pointA = 0;
	theInput1 = Math.abs(Number(document.getElementById("ratio1").value));
	theRatio1 = 1 / theInput1;

	setExceptions();

	exceptionIndex = 0;
	for(u=0; u < primeList.length; u++){
		if(theInput1 < primeList[u]){
			exceptionIndex = u;
			break;
		}
	}

	calculateRange();

	//LOOP F
	for(f=0; f < favoriteList.length ; f++){
		pointA = f;
		//LOOP Q
		for(q=exceptionIndex; q < primeList.length; q++){
			if(primeList[q] > theInput1){
				ratioB = theInput1 / primeList[q];
			}else{
				ratioB = primeList[q] / theInput1;
			}
			exceptionFlag = 0;
			/*for(w=0;w<exceptionList.length;w++){
				if(exceptionList[w] == q)
					exceptionFlag = 1;
			}
			if(exceptionFlag == 0)
				mainProcessing();*/
			mainProcessing();
		}
	}
}


function mainProcessing(){
		//LOOP I
		for(i=0; i < frequencyList.length; i++){
			offset00 = Math.abs(favoriteList[pointA] - frequencyList[i]);
				//LOOP J
			for(j=0; j < frequencyList.length; j++){
				offset01 = Math.abs(favoriteList[pointA] - frequencyList[j]);
				if(i != j && j != pointA){
					if(offset00 > offset01){
						ratioA = offset01 / offset00;
					}else{
						ratioA = offset00 / offset01;
					}
					calculatedOffset = Math.abs(ratioA - ratioB);
						if((favoriteList[pointA] < frequencyList[i]) && (favoriteList[pointA] < frequencyList[j]))
						validate();
					if((favoriteList[pointA] > frequencyList[i]) && (favoriteList[pointA] > frequencyList[j]))
						validate();
				}
			}
		}
	update();
}

function validate(){
	if(calculatedOffset < result[0]){
		for(g=2; g>0; g--){
			result[g] = result[g-1]
			resultIndexA[g] = resultIndexA[g-1];
			resultIndexB[g] = resultIndexB[g-1];
			resultIndexC[g] = resultIndexC[g-1];
			loggedPrimes[g] = loggedPrimes[g-1];
		}
		result[0] = calculatedOffset;
		resultIndexA[0] = i;
		resultIndexB[0] = j;
		resultIndexC[0] = pointA;
		loggedPrimes[0] = q;
	}
}

function update(){
	frequencyA = '';
	frequencyB = '';
	frequencyC = '';
	myPrimes = '';
	for(g=0; g<3; g++){
			frequencyA += frequencyList[resultIndexA[g]] + ' ';
			frequencyB += frequencyList[resultIndexB[g]] + ' ';
			frequencyC += favoriteList[resultIndexC[g]] + ' ';
			myPrimes += primeList[loggedPrimes[g]] + ' ';
			}
		document.getElementById("mainOutput1").innerHTML = result[0];
		document.getElementById("mainOutput2").innerHTML = result[1];
		document.getElementById("mainOutput3").innerHTML = result[2];
		document.getElementById("mainOutput4").innerHTML = frequencyA;
		document.getElementById("mainOutput5").innerHTML = frequencyB;
		document.getElementById("mainOutput6").innerHTML = frequencyC;
		document.getElementById("mainOutput7").innerHTML = myPrimes;
}
</script>


<body>
<h1>Instructions</h1>
<img src="Instructions.jpg">
<h2>If you don't understand the instructions, please don't use this. It works.</h2>
<div style="margin:auto">
<form>
<p>Input ratio</p>
<input type="text" id="ratio1"></input>
<br>
<input type="button" value="Calculate" onClick="init()"></input>
</form>
<table><tr>
<td>Quality 1</td>
<td><p id="mainOutput1"></p></td>
</tr><tr>
<td>Quality 2</td>
<td><p id="mainOutput2"></p></td>
</tr><tr>
<td>Quality 3</td>
<td>
<p id="mainOutput3"></p></td>
</tr><tr>
<td>Offset 1</td>
<td><p id="mainOutput4"></p></td>
</tr><tr>
<td>Offset 2</td>
<td><p id="mainOutput5"></p></td>
</tr><tr>
<td>Axis</td>
<td><p id="mainOutput6"></p></td>
</tr><tr>
<td>Prime used</td>
<td><p id="mainOutput7"></p></td>
</tr></table>
</div>
</body>
</html>